<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SkyBlock Mobile RPG</title>
    
    <!-- Telegram WebApp API -->
    <script src="https://telegram.org/js/telegram-web-app.js?ver=20260107"></script>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="header-ui">
        <button class="top-btn" onclick="game.showModal('skillsModal')">‚öôÔ∏è –°–ö–ò–õ–õ–´</button>
        <button class="top-btn" onclick="game.showModal('updatesModal')">üìú –û–ë–ù–û–í–õ–ï–ù–ò–Ø</button>
        <div class="sb-lvl-badge">LVL <span id="sb-lvl">0.00</span></div>
        <button class="top-btn" onclick="game.showModal('leadModal')">üèÜ –¢–û–ü</button>
    </div>

    <div id="viewport">
        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div id="home" class="screen active">
            <div class="card" style="text-align:center">
                <h1 style="margin:0;color:var(--accent)">üí∞ <span id="coins-val">0</span></h1>
                <small style="color:var(--gray)">–¢–í–û–ò –ú–û–ù–ï–¢–´</small>
            </div>
            <div class="card">
                <div class="stat-grid" id="stats-display"></div>
            </div>
        </div>

        <!-- –ü–æ—Ä—Ç–∞–ª -->
        <div id="portal" class="screen">
            <h3 style="text-align:center;margin-top:0">üåÄ –ü–û–†–¢–ê–õ</h3>
            <div class="portal-grid">
                <div class="portal-node" onclick="game.goLoc('mine')">‚õèÔ∏è –®–ê–•–¢–ê</div>
                <div class="portal-node" onclick="game.goLoc('farm')">üåæ –§–ï–†–ú–ê</div>
                <div class="portal-node" onclick="game.goLoc('fish')">üé£ –†–´–ë–ê–õ–ö–ê</div>
                <div class="portal-node" onclick="game.goLoc('forage')">üå≤ –õ–ï–°</div>
                <div class="portal-node" onclick="game.switchTab('dungeons-menu')">üíÄ –î–ê–ù–ñ–ò</div>
                <div class="portal-node" onclick="game.msg('–°–∫–æ—Ä–æ...')">üëπ –°–õ–ï–ô–ï–†–´</div>
                <div class="portal-node" onclick="game.switchTab('shop')">üõí –ú–ê–ì–ê–ó–ò–ù</div>
                <div class="portal-node" onclick="game.msg('–°–∫–æ—Ä–æ...')">‚öñÔ∏è –û–ë–ú–ï–ù</div>
                <div class="portal-node" onclick="game.msg('–°–∫–æ—Ä–æ...')">üìÖ –ò–í–ï–ù–¢</div>
                <div class="portal-node" onclick="game.msg('–°–∫–æ—Ä–æ...')">üó≥Ô∏è –ú–≠–†</div>
                <div class="portal-node" onclick="game.switchTab('pen')">üêæ –ó–ê–ì–û–ù</div>
            </div>
        </div>

        <!-- –†–∞–±–æ—Ç–∞ –Ω–∞ –ª–æ–∫–∞—Ü–∏–∏ -->
        <div id="action-loc" class="screen">
            <button class="top-btn" onclick="game.switchTab('portal')">‚Üê –ù–ê–ó–ê–î</button>
            <h2 id="loc-title" style="text-align:center;text-transform:uppercase">–®–ê–•–¢–ê</h2>
            <div class="card" style="text-align:center">
                <button id="action-btn" class="cooldown-btn" onclick="game.executeAction()">
                    <div id="action-prog" class="progress-overlay"></div>
                    <span style="position:relative">–†–ê–ë–û–¢–ê–¢–¨</span>
                </button>
            </div>
            <div id="loc-log" style="text-align:center;color:var(--green);min-height:20px;margin-top:10px;"></div>
        </div>

        <!-- –î–∞–Ω–∂–∏ -->
        <div id="dungeons-menu" class="screen">
            <button class="top-btn" onclick="game.switchTab('portal')">‚Üê –ù–ê–ó–ê–î</button>
            <h3>üíÄ –ö–ê–¢–ê–ö–û–ú–ë–´</h3>
            <div class="card"><p>–≠–¢–ê–ñ I</p><button class="cooldown-btn" onclick="game.startDungeon(1)">–í–û–ô–¢–ò</button></div>
            <div class="card"><p>–≠–¢–ê–ñ II</p><button class="cooldown-btn" onclick="game.startDungeon(2)">–í–û–ô–¢–ò</button></div>
            <div class="card"><p>–≠–¢–ê–ñ III</p><button class="cooldown-btn" onclick="game.startDungeon(3)">–í–û–ô–¢–ò</button></div>
            <div class="card"><p>–≠–¢–ê–ñ IV</p><button class="cooldown-btn" onclick="game.startDungeon(4)">–í–û–ô–¢–ò</button></div>
            <div class="card"><p>–≠–¢–ê–ñ V</p><button class="cooldown-btn" onclick="game.startDungeon(5)">–í–û–ô–¢–ò</button></div>
            <div class="card"><p>–≠–¢–ê–ñ VI</p><button class="cooldown-btn" onclick="game.startDungeon(6)">–í–û–ô–¢–ò</button></div>
        </div>

        <!-- –ë–æ–π -->
        <div id="battle-screen" class="screen">
            <h2 id="mob-name" style="text-align:center;color:var(--red)">–ú–û–ù–°–¢–†</h2>
            <div class="card">
                <div style="display:flex;justify-content:space-between"><span>–•–ü –í–†–ê–ì–ê</span><span id="m-hp-txt">50/50</span></div>
                <div class="hp-bar"><div id="m-hp-fill" class="hp-fill" style="width:100%"></div></div>
            </div>
            <div class="card" style="border-color:var(--blue)">
                <div style="display:flex;justify-content:space-between"><span>–¢–í–û–Å –•–ü</span><span id="p-hp-txt">100/100</span></div>
                <div class="hp-bar"><div id="p-hp-fill" class="hp-fill" style="width:100%;background:var(--blue)"></div></div>
            </div>
            <button class="cooldown-btn" style="height:80px" onclick="game.dungeonAttack()">üí• –£–î–ê–†–ò–¢–¨</button>
        </div>

        <!-- –õ—É—Ç –ø–æ—Å–ª–µ –¥–∞–Ω–∂–∞ -->
        <div id="loot-screen" class="screen">
            <h2 style="text-align:center;color:var(--accent)">–ü–û–ë–ï–î–ê!</h2>
            <p style="text-align:center;font-size:1.2rem">üéÅ –°—É–Ω–¥—É–∫ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å!</p>
            <div id="extra-chests" style="display:none;">
                <h3 style="text-align:center">–ö—É–ø–∏—Ç—å –¥–æ–ø. —Å—É–Ω–¥—É–∫?</h3>
                <div class="item-actions">
                    <button class="act-btn" onclick="game.buyExtraChest(1)">–û–±—ã—á–Ω—ã–π (3–º)</button>
                    <button class="act-btn" onclick="game.buyExtraChest(2)">–≠–ø–∏—á–µ—Å–∫–∏–π (5–º)</button>
                    <button class="act-btn" onclick="game.buyExtraChest(3)">–≠–ª–∏—Ç–Ω—ã–π (10–º)</button>
                </div>
            </div>
            <button class="cooldown-btn" onclick="game.switchTab('portal')">–í–ï–†–ù–£–¢–¨–°–Ø –ù–ê –ü–û–†–¢–ê–õ</button>
        </div>

        <!-- –ú–∞–≥–∞–∑–∏–Ω -->
        <div id="shop" class="screen">
            <button class="top-btn" onclick="game.switchTab('portal')">‚Üê –ù–ê–ó–ê–î</button>
            <h3>üõí –ú–ê–ì–ê–ó–ò–ù</h3>
            <div class="inv-tabs">
                <div class="inv-tab active" onclick="game.shopFilter('weapon',this)">–û–†–£–ñ–ò–ï</div>
                <div class="inv-tab" onclick="game.shopFilter('armor',this)">–ë–†–û–ù–Ø</div>
                <div class="inv-tab" onclick="game.shopFilter('tool',this)">–ò–ù–°–¢–†–£–ú–ï–ù–¢–´</div>
                <div class="inv-tab" onclick="game.shopFilter('accessory',this)">–¢–ê–õ–ò–°–ú–ê–ù–´</div>
                <div class="inv-tab" onclick="game.shopFilter('buff',this)">–ë–ê–§–§–´</div>
                <div class="inv-tab" onclick="game.shopFilter('pet',this)">–ü–ò–¢–û–ú–¶–´</div>
            </div>
            <div id="shop-list"></div>
        </div>

        <!-- –ú–∏–Ω—å–æ–Ω—ã -->
        <div id="minions" class="screen">
            <div class="card" style="border-color:var(--accent);text-align:center">
                –ö–û–®–ï–õ–ï–ö: <span id="m-coins-val" style="color:var(--accent)">0</span> üí∞
            </div>
            <div id="minions-list"></div>
        </div>

        <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å -->
        <div id="inventory" class="screen">
            <div class="inv-tabs">
                <div class="inv-tab active" onclick="game.filterInv('weapon',this)">–û–†–£–ñ–ò–ï</div>
                <div class="inv-tab" onclick="game.filterInv('armor',this)">–ë–†–û–ù–Ø</div>
                <div class="inv-tab" onclick="game.filterInv('tool',this)">–ò–ù–°–¢–†–£–ú–ï–ù–¢–´</div>
                <div class="inv-tab" onclick="game.filterInv('accessory',this)">–¢–ê–õ–ò–°–ú–ê–ù–´</div>
                <div class="inv-tab" onclick="game.filterInv('material',this)">–ú–ê–¢–ï–†–ò–ê–õ</div>
                <div class="inv-tab" onclick="game.filterInv('chest',this)">–°–£–ù–î–£–ö–ò</div>
                <div class="inv-tab" onclick="game.filterInv('pet',this)">–ü–ò–¢–û–ú–¶–´</div>
            </div>
            <div id="inv-list"></div>
        </div>

        <!-- –ó–∞–≥–æ–Ω –ø–∏—Ç–æ–º—Ü–µ–≤ -->
        <div id="pen" class="screen">
            <button class="top-btn" onclick="game.switchTab('portal')">‚Üê –ù–ê–ó–ê–î</button>
            <h3>üêæ –ó–ê–ì–û–ù</h3>
            <div id="pen-list"></div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="skillsModal" class="modal">
        <span style="float:right;font-weight:bold;cursor:pointer" onclick="game.closeModal('skillsModal')">[–ó–ê–ö–†–´–¢–¨]</span>
        <h3>üìä –¢–í–û–ò –ù–ê–í–´–ö–ò</h3>
        <div id="skills-content"></div>
        <h3>–ö–õ–ê–°–°</h3>
        <select id="class-select" onchange="game.setClass(this.value)">
            <option value="">–ù–µ –≤—ã–±—Ä–∞–Ω</option>
            <option value="berserk">–ë–µ—Ä—Å–µ—Ä–∫</option>
            <option value="archer">–ê—Ä—á–µ—Ä</option>
            <option value="tank">–¢–∞–Ω–∫</option>
            <option value="mage">–ú–∞–≥</option>
            <option value="healer">–•–∏–ª–ª–µ—Ä</option>
        </select>
    </div>

    <div id="updatesModal" class="modal">
        <span style="float:right;font-weight:bold;cursor:pointer" onclick="game.closeModal('updatesModal')">[–ó–ê–ö–†–´–¢–¨]</span>
        <h3 style="color:var(--accent);text-align:center">üìú –û–ë–ù–û–í–õ–ï–ù–ò–Ø v2.0 ‚Äî 06.01.2026</h3>
        <div class="changelog-section">
            <h3>üî• –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:</h3>
            <p>‚Ä¢ –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞—Å—Å–æ–≤ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏<br>
               ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω—ã –±–æ–Ω—É—Å—ã –∑–∞ –ø—Ä–æ–∫–∞—á–∫—É –∫–∞–∂–¥–æ–≥–æ –Ω–∞–≤—ã–∫–∞<br>
               ‚Ä¢ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞ –±—Ä–æ–Ω–∏ (—É—Ä–æ–Ω —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã)<br>
               ‚Ä¢ –ù–æ–≤—ã–µ –Ω–∞–≥—Ä–∞–¥—ã –≤ –¥–∞–Ω–∂–∞—Ö —Å –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏<br>
               ‚Ä¢ –ò—Å—Ü–µ–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –º–æ–±–∞ ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –•–∏–ª–ª–µ—Ä–∞</p>
        </div>
        <div class="changelog-section">
            <h3>‚öîÔ∏è –ö–ª–∞—Å—Å—ã –∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:</h3>
            <p><b>–ë–µ—Ä—Å–µ—Ä–∫</b>: +20% —É—Ä–æ–Ω–∞ –≤ –¥–∞–Ω–∂–∞—Ö, 20% —à–∞–Ω—Å –¥–≤–æ–π–Ω–æ–≥–æ —É–¥–∞—Ä–∞<br>
               <b>–ê—Ä—á–µ—Ä</b>: 20% —à–∞–Ω—Å –≤–∞–Ω—à–æ—Ç–∞ –æ–±—ã—á–Ω—ã—Ö –º–æ–±–æ–≤, 3% —à–∞–Ω—Å –Ω–∞–Ω–µ—Å—Ç–∏ 40% –•–ü –±–æ—Å—Å—É<br>
               <b>–¢–∞–Ω–∫</b>: +30% –±—Ä–æ–Ω–∏, +5% —Å–∏–ª—ã<br>
               <b>–ú–∞–≥</b>: +20% –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–Ω–∞<br>
               <b>–•–∏–ª–ª–µ—Ä</b>: +5% –∫–æ –≤—Å–µ–º —Å—Ç–∞—Ç–∞–º, +20% –•–ü –ø–æ—Å–ª–µ —É–±–∏–π—Å—Ç–≤–∞ –º–æ–±–∞</p>
        </div>
        <div class="changelog-section">
            <h3>üìä –ë–æ–Ω—É—Å—ã –æ—Ç –Ω–∞–≤—ã–∫–æ–≤:</h3>
            <p>‚Ä¢ –®–∞—Ö—Ç–∞: +2 –±—Ä–æ–Ω–∏ –∑–∞ —É—Ä–æ–≤–µ–Ω—å<br>
               ‚Ä¢ –§–µ—Ä–º–∞: +2 –∑–¥–æ—Ä–æ–≤—å—è –∑–∞ —É—Ä–æ–≤–µ–Ω—å<br>
               ‚Ä¢ –õ–µ—Å: +2 —Å–∏–ª—ã –∑–∞ —É—Ä–æ–≤–µ–Ω—å<br>
               ‚Ä¢ –†—ã–±–∞–ª–∫–∞: +1 –∑–¥–æ—Ä–æ–≤—å–µ –∏ +1 –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –∑–∞ —É—Ä–æ–≤–µ–Ω—å<br>
               ‚Ä¢ –ë–æ–π: +2 —Å–∏–ª—ã –∏ +2 –∫—Ä–∏—Ç. —É—Ä–æ–Ω–∞ –∑–∞ —É—Ä–æ–≤–µ–Ω—å<br>
               ‚Ä¢ –î–∞–Ω–∂–∏: +1.5% –∫–æ –≤—Å–µ–º —Å—Ç–∞—Ç–∞–º (–∫—Ä–æ–º–µ —É–¥–∞—á–∏) –∑–∞ —É—Ä–æ–≤–µ–Ω—å ‚Äî —Ç–æ–ª—å–∫–æ –≤ –¥–∞–Ω–∂–∞—Ö</p>
        </div>
        <div class="changelog-section">
            <h3>üéÅ –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã (–≥–¥–µ –≤–∑—è—Ç—å):</h3>
            <p>‚Ä¢ <b>–ú–µ—á –ú–∏–¥–∞—Å–∞</b> (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å–∏–ª–∞ –æ—Ç –º–æ–Ω–µ—Ç) ‚Äî –¥—Ä–æ–ø —Å 4‚Äì5 —ç—Ç–∞–∂–∞<br>
               ‚Ä¢ <b>–ú–µ—á –ì–∏–≥–∞–Ω—Ç–∞</b> (+100 —Å–∏–ª—ã, +50% –∫—Ä–∏—Ç. —É—Ä–æ–Ω–∞) ‚Äî –¥—Ä–æ–ø —Å 5 —ç—Ç–∞–∂–∞ (3%)<br>
               ‚Ä¢ <b>–ì–∏–ø–µ—Ä–∏–æ–Ω</b> (–º–∞–≥–∏—á–µ—Å–∫–æ–µ –æ—Ä—É–∂–∏–µ) ‚Äî –¥—Ä–æ–ø —Å 6 —ç—Ç–∞–∂–∞ (0.5%)</p>
        </div>
        <h3 style="color:var(--accent);text-align:center">üìú –û–ë–ù–û–í–õ–ï–ù–ò–Ø v2.1 ‚Äî 07.01.2026</h3>
        <div class="changelog-section">
            <h3>üî• –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:</h3>
            <p>‚Ä¢ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ –∫—Ä–∏—Ç–∞—Ö, —É–¥–∞—Ä–∞—Ö –∏ —Ç.–¥.<br>
               ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö –≤ –º–∞–≥–∞–∑–∏–Ω–µ (double_chance, triple_chance –∏ —Ç.–¥.)<br>
               ‚Ä¢ –£–±—Ä–∞–Ω—ã –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ –º–µ—á–∏ –∏–∑ –º–∞–≥–∞–∑–∏–Ω–∞ ‚Äî —Ç–æ–ª—å–∫–æ –¥—Ä–æ–ø<br>
               ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–ª–∞—Ç–Ω—ã–µ —Å—É–Ω–¥—É–∫–∏ –¥–ª—è 5-6 —ç—Ç–∞–∂–µ–π (–æ–±—ã—á–Ω—ã–π, —ç–ø–∏—á–µ—Å–∫–∏–π, —ç–ª–∏—Ç–Ω—ã–π —Å —Ä–∞–∑–Ω—ã–º–∏ —à–∞–Ω—Å–∞–º–∏ –Ω–∞ –ì–∏–ø–µ—Ä–∏–æ–Ω)<br>
               ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–ó–∞–≥–æ–Ω" –≤ –ø–æ—Ä—Ç–∞–ª–µ, —Ä–∞–∑–¥–µ–ª "–ü–ò–¢–û–ú–¶–´" –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ<br>
               ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–∏—Ç–æ–º—Ü—ã –≤ –º–∞–≥–∞–∑–∏–Ω (—á–µ—à—É–π–Ω–∏—Ü–∞, –∫—Ä–æ–ª–∏–∫, —Å–∫–≤–∏–¥) –∑–∞ 5000, —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏, —É—Ä–æ–≤–Ω—è–º–∏ –∏ –±–æ–Ω—É—Å–∞–º–∏</p>
        </div>
    </div>

<div id="leadModal" class="modal">
    <span style="float:right;font-weight:bold;cursor:pointer" onclick="game.closeModal('leadModal')">[–ó–ê–ö–†–´–¢–¨]</span>
    <h3>üèÜ –¢–ê–ë–õ–ò–¶–ê –õ–ò–î–ï–†–û–í</h3>
    
    <!-- –í–∫–ª–∞–¥–∫–∏ —Ç–æ–ø–∞ -->
    <div class="inv-tabs">
        <div class="inv-tab active" onclick="game.loadTop('rich')">üí∞ –ë–û–ì–ê–¢–´–ï</div>
        <div class="inv-tab" onclick="game.loadTop('dungeons')">üíÄ –î–ê–ù–ñ–ò</div>
        <div class="inv-tab" onclick="game.loadTop('level')">üåü –£–†–û–í–ï–ù–¨</div>
    </div>
    
    <div id="lead-list"></div>
</div>

    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav id="nav">
        <button class="nav-item active" onclick="game.switchTab('home',this)"><span>üè†</span>–î–û–ú</button>
        <button class="nav-item" onclick="game.switchTab('portal',this)"><span>üåÄ</span>–ü–û–†–¢–ê–õ</button>
        <button class="nav-item" onclick="game.switchTab('minions',this)"><span>üë∑</span>–ú–ò–ù–¨–û–ù–´</button>
        <button class="nav-item" onclick="game.switchTab('inventory',this)"><span>üéí</span>–ò–ù–í–ï–ù–¢–ê–†–¨</button>
    </nav>
   <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∏–≥—Ä—ã -->
    <script src="game.js"></script>
    <script src="top.js"></script>
    <script src="dungeon.js"></script>
</body>
</html>





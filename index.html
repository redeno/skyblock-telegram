<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SkyBlock Mobile RPG</title>
    <script src="https://telegram.org/js/telegram-web-app.js?ver=20260107"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="header-ui">
        <button class="top-btn" onclick="game.showModal('skillsModal')">РџЎ№ИЈ лАлџлўлЏлЏлФ</button>
        <button class="top-btn" onclick="game.showModal('updatesModal')">­ЪЊю лълЉлЮлълњлЏлЋлЮлўл»</button>
        <div class="sb-lvl-badge">LVL <span id="sb-lvl">0.00</span></div>
        <button class="top-btn" onclick="game.showModal('leadModal')">­ЪЈє лблълЪ</button>
    </div>

    <div id="viewport">
        <div id="home" class="screen active">
            <div class="card" style="text-align:center">
                <h1 style="margin:0;color:var(--accent)">­Ъњ░ <span id="coins-val">0</span></h1>
                <small style="color:var(--gray)">лблњлълў люлълЮлЋлблФ</small>
            </div>
            <div id="active-buffs" style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-bottom:8px;"></div>
            <div class="card">
                <div class="stat-grid" id="stats-display"></div>
            </div>
        </div>

        <div id="portal" class="screen">
            <h3 style="text-align:center;margin-top:0">­Ъїђ лЪлълалблљлЏ</h3>
            <div class="portal-grid">
                <div class="portal-node" onclick="game.openMiningMenu()">РЏЈ№ИЈ лелљлЦлблљ</div>
                <div class="portal-node" onclick="game.openFarmingMenu()">­ЪїЙ лцлЋлалюлљ</div>
                <div class="portal-node" onclick="game.openFishingMenu()">­ЪјБ лалФлЉлљлЏлџлљ</div>
                <div class="portal-node" onclick="game.openForagingMenu()">­Ъї▓ лЏлЋлА</div>
                <div class="portal-node" onclick="game.switchTab('dungeons-menu')">­Ъњђ лћлљлЮлќлў</div>
                <div class="portal-node" onclick="game.openSlayerMenu()">­ЪЉ╣ лАлЏлЋлЎлЋлалФ</div>
                <div class="portal-node" onclick="game.switchTab('shop')">­ЪЏњ люлљлЊлљлЌлўлЮ</div>
                <div class="portal-node" onclick="game.openEnchanting()">­ЪЊќ лЌлљлДлљлалълњлљлЮлўлЋ</div>
                <div class="portal-node" onclick="game.openExchange()">Рџќ№ИЈ лълЉлюлЋлЮ</div>
                <div class="portal-node" onclick="game.openEventsMenu()">­ЪЊЁ лўлњлЋлЮлб</div>
                <div class="portal-node" onclick="game.openMayorMenu()">­ЪЌ│№ИЈ люлГла</div>
                <div class="portal-node" onclick="game.openAdminPanel()" style="border-color:var(--red);">­ЪћД лљлћлюлўлЮ</div>
            </div>
        </div>

        <div id="farming-menu" class="screen">
            <button class="top-btn" onclick="game.switchTab('portal')">Рєљ лЮлљлЌлљлћ</button>
            <h3>­ЪїЙ лцлЋлалюлљ: лњлФлЉлъла лџлБлЏлглблБлалФ</h3>
            <div id="farming-list"></div>
        </div>

        <div id="action-loc" class="screen">
            <button class="top-btn" onclick="game.switchTab('portal')">Рєљ лЮлљлЌлљлћ</button>
            <h2 id="loc-title" style="text-align:center;text-transform:uppercase">лелљлЦлблљ</h2>
            <div class="card" style="text-align:center">
                <button id="action-btn" class="cooldown-btn" onclick="game.executeAction()">
                    <div id="action-prog" class="progress-overlay"></div>
                    <span style="position:relative">лалљлЉлълблљлблг</span>
                </button>
            </div>
            <div id="loc-log" style="text-align:center;color:var(--green);min-height:20px;margin-top:10px;"></div>
            <div id="mining-islands" style="display:none; margin-top:15px;"></div>
        </div>

        <div id="dungeons-menu" class="screen">
            <button class="top-btn" onclick="game.switchTab('portal')">Рєљ лЮлљлЌлљлћ</button>
            <h3>­Ъњђ лџлљлблљлџлълюлЉлФ</h3>
            <div class="card"><p>лГлблљлќ I</p><button class="cooldown-btn" onclick="game.startDungeon(1)">лњлълЎлблў</button></div>
            <div class="card"><p>лГлблљлќ II</p><button class="cooldown-btn" onclick="game.startDungeon(2)">лњлълЎлблў</button></div>
            <div class="card"><p>лГлблљлќ III</p><button class="cooldown-btn" onclick="game.startDungeon(3)">лњлълЎлблў</button></div>
            <div class="card"><p>лГлблљлќ IV</p><button class="cooldown-btn" onclick="game.startDungeon(4)">лњлълЎлблў</button></div>
            <div class="card"><p>лГлблљлќ V</p><button class="cooldown-btn" onclick="game.startDungeon(5)">лњлълЎлблў</button></div>
            <div class="card"><p>лГлблљлќ VI</p><button class="cooldown-btn" onclick="game.startDungeon(6)">лњлълЎлблў</button></div>
        </div>

        <div id="slayer-menu" class="screen"></div>

        <div id="slayer-battle-screen" class="screen">
            <button class="top-btn" onclick="game.cancelSlayer()">Рєљ лълблюлЋлЮлљ</button>
            <h2 style="text-align:center;color:var(--red)">­ЪЉ╣ лАлЏлЋлЎлЋла лЉлълЎ</h2>
            <div class="card" style="text-align:center;">
                <p id="slayer-kills-txt" style="color:var(--accent); font-weight:bold; margin:0 0 10px 0;">лЪЛђлЙл│ЛђлхЛЂЛЂ: 0/10</p>
                <h3 id="slayer-mob-name" style="color:var(--red); margin:5px 0;">люлълЮлАлбла</h3>
                <div style="display:flex;justify-content:space-between"><span>лЦлЪ лњлалљлЊлљ</span><span id="slayer-m-hp-txt">50/50</span></div>
                <div class="hp-bar"><div id="slayer-m-hp-fill" class="hp-fill" style="width:100%"></div></div>
                <div style="display:flex;justify-content:space-between;margin-top:10px;"><span>лблњлълЂ лЦлЪ</span><span id="slayer-p-hp-txt">100/100</span></div>
                <div class="hp-bar"><div id="slayer-p-hp-fill" class="hp-fill" style="width:100%;background:var(--blue)"></div></div>
                <button class="cooldown-btn" style="height:70px;margin-top:15px;" onclick="game.slayerAttack()">­ЪњЦ лБлћлљлалўлблг</button>
                <div id="slayer-xp-bar"></div>
            </div>
        </div>

        <div id="battle-screen" class="screen">
            <h2 id="mob-name" style="text-align:center;color:var(--red)">люлълЮлАлбла</h2>
            <div class="card">
                <div style="display:flex;justify-content:space-between"><span>лЦлЪ лњлалљлЊлљ</span><span id="m-hp-txt">50/50</span></div>
                <div class="hp-bar"><div id="m-hp-fill" class="hp-fill" style="width:100%"></div></div>
            </div>
            <div class="card" style="border-color:var(--blue)">
                <div style="display:flex;justify-content:space-between"><span>лблњлълЂ лЦлЪ</span><span id="p-hp-txt">100/100</span></div>
                <div class="hp-bar"><div id="p-hp-fill" class="hp-fill" style="width:100%;background:var(--blue)"></div></div>
            </div>
            <button class="cooldown-btn" style="height:80px" onclick="game.dungeonAttack()">­ЪњЦ лБлћлљлалўлблг</button>
        </div>

        <div id="loot-screen" class="screen">
            <h2 style="text-align:center;color:var(--accent)">лЪлълЉлЋлћлљ!</h2>
            <div id="dungeon-log" style="color:#0f0; font-size:18px; text-align:center; margin:15px; padding:12px; background:rgba(0,0,0,0.5); border-radius:10px;"></div>
            <p style="text-align:center;font-size:1.2rem">­ЪјЂ лАЛЃлйл┤ЛЃл║ л┤лЙл▒л░л▓л╗лхлй л▓ лИлйл▓лхлйЛѓл░ЛђЛї!</p>
            <div id="extra-chests" style="display:none;">
                <h3 style="text-align:center">лџЛЃл┐лИЛѓЛї л┤лЙл┐. ЛЂЛЃлйл┤ЛЃл║?</h3>
                <div class="item-actions">
                    <button class="act-btn" onclick="game.buyExtraChest(1)">лъл▒ЛІЛЄлйЛІл╣ (3л╝)</button>
                    <button class="act-btn" onclick="game.buyExtraChest(2)">лГл┐лИЛЄлхЛЂл║лИл╣ (5л╝)</button>
                    <button class="act-btn" onclick="game.buyExtraChest(3)">лГл╗лИЛѓлйЛІл╣ (10л╝)</button>
                </div>
            </div>
            <div style="display:flex;flex-direction:column;gap:10px;margin-top:20px">
                <button class="cooldown-btn" onclick="game.switchTab('portal')">лњлЋлалЮлБлблглАл» лЮлљ лЪлълалблљлЏ</button>
                <button class="cooldown-btn" style="background:var(--green)" onclick="game.repeatDungeon()">лЪлълњлблълалўлблг лћлљлЮлќ</button>
            </div>
        </div>

        <div id="shop" class="screen">
            <button class="top-btn" onclick="game.switchTab('portal')">Рєљ лЮлљлЌлљлћ</button>
            <h3>­ЪЏњ люлљлЊлљлЌлўлЮ</h3>
            <div class="inv-tabs">
                <div class="inv-tab active" onclick="game.shopFilter('weapon',this)">лълалБлќлўлЋ</div>
                <div class="inv-tab" onclick="game.shopFilter('armor',this)">лЉлалълЮл»</div>
                <div class="inv-tab" onclick="game.shopFilter('mining_tool',this)">РЏЈ№ИЈ лџлўлалџлў</div>
                <div class="inv-tab" onclick="game.shopFilter('mining_armor',this)">РЏЈ№ИЈ лЉлалълЮл»</div>
                <div class="inv-tab" onclick="game.shopFilter('farming_tool',this)">­ЪїЙ люлълблФлЊлў</div>
                <div class="inv-tab" onclick="game.shopFilter('farming_armor',this)">­ЪїЙ лЉлалълЮл»</div>
                <div class="inv-tab" onclick="game.shopFilter('foraging_tool',this)">­Ъї▓ лблълЪлълалФ</div>
                <div class="inv-tab" onclick="game.shopFilter('foraging_armor',this)">­Ъї▓ лЉлалълЮл»</div>
                <div class="inv-tab" onclick="game.shopFilter('fishing_tool',this)">­ЪјБ лБлћлълДлџлў</div>
                <div class="inv-tab" onclick="game.shopFilter('fishing_armor',this)">­ЪјБ лЉлалълЮл»</div>
                <div class="inv-tab" onclick="game.shopFilter('accessory',this)">лблљлЏлўлАлюлљлЮлФ</div>
                <div class="inv-tab" onclick="game.shopFilter('buff',this)">лЉлљлцлцлФ</div>
                <div class="inv-tab" onclick="game.shopFilter('pet',this)">лЪлўлблълюлдлФ</div>
            </div>
            <div id="shop-list"></div>
        </div>

        <div id="minions" class="screen">
            <div class="card" style="border-color:var(--accent);text-align:center">
                лџлълелЋлЏлЋлџ: <span id="m-coins-val" style="color:var(--accent)">0</span> ­Ъњ░
            </div>
            <div id="minions-list"></div>
        </div>

        <div id="inventory" class="screen">
            <div class="inv-tabs">
                <div class="inv-tab active" onclick="game.filterInv('weapon',this)">лълалБлќлўлЋ</div>
                <div class="inv-tab" onclick="game.filterInv('armor',this)">лЉлалълЮл»</div>
                <div class="inv-tab" onclick="game.filterInv('tool',this)">лўлЮлАлблалБлюлЋлЮлблФ</div>
                <div class="inv-tab" onclick="game.filterInv('accessory',this)">лблљлЏлўлАлюлљлЮлФ</div>
                <div class="inv-tab" onclick="game.filterInv('material',this)">люлљлблЋлалўлљлЏ</div>
                <div class="inv-tab" onclick="game.filterInv('chest',this)">лАлБлЮлћлБлџлў</div>
                <div class="inv-tab" onclick="game.filterInv('potion',this)">лЉлљлцлцлФ</div>
                <div class="inv-tab" onclick="game.filterInv('book',this)">­ЪЊќ лџлЮлўлЊлў</div>
                <div class="inv-tab" onclick="game.filterInv('pet',this)">лЪлўлблълюлдлФ</div>
            </div>
            <div id="inv-list"></div>
        </div>
    </div>

    <div id="skillsModal" class="modal">
        <span style="float:right;font-weight:bold;cursor:pointer" onclick="game.closeModal('skillsModal')">[лЌлљлџлалФлблг]</span>
        <h3>­ЪЊі лблњлълў лЮлљлњлФлџлў</h3>
        <div id="skills-content"></div>
        <h3>лџлЏлљлАлА</h3>
        <select id="class-select" onchange="game.setClass(this.value)">
            <option value="">лЮлх л▓ЛІл▒Лђл░лй</option>
            <option value="berserk">лЉлхЛђЛЂлхЛђл║</option>
            <option value="archer">лљЛђЛЄлхЛђ</option>
            <option value="tank">лбл░лйл║</option>
            <option value="mage">люл░л│</option>
            <option value="healer">лЦлИл╗л╗лхЛђ</option>
        </select>
    </div>

    <div id="updatesModal" class="modal"></div>
    <div id="leadModal" class="modal">
        <span style="float:right;font-weight:bold;cursor:pointer" onclick="game.closeModal('leadModal')">[лЌлљлџлалФлблг]</span>
        <h3>­ЪЈє лблљлЉлЏлўлдлљ лЏлўлћлЋлалълњ</h3>
        <div class="inv-tabs">
            <div class="inv-tab active" onclick="game.loadTop('rich')">­Ъњ░ лЉлълЊлљлблФлЋ</div>
            <div class="inv-tab" onclick="game.loadTop('dungeons')">­Ъњђ лћлљлЮлќлў</div>
            <div class="inv-tab" onclick="game.loadTop('level')">­ЪїЪ лБлалълњлЋлЮлг</div>
        </div>
        <div id="lead-list"></div>
    </div>

    <div id="exchangeModal" class="modal">
        <span style="float:right;font-weight:bold;cursor:pointer" onclick="game.closeModal('exchangeModal')">[лЌлљлџлалФлблг]</span>
        <h3>Рџќ№ИЈ лълЉлюлЋлЮ</h3>
        <div id="exchange-content"></div>
    </div>

    <div id="talentsModal" class="modal">
        <span style="float:right;font-weight:bold;cursor:pointer" onclick="game.closeModal('talentsModal')">[лЌлљлџлалФлблг]</span>
        <h3>­ЪЊю лблљлЏлљлЮлблФ лцлЋлалюлЋлалАлблњлљ</h3>
        <div id="talents-content"></div>
    </div>

    <div id="adminModal" class="modal">
        <div class="modal-content" style="background:var(--card); padding:20px; border-radius:10px; border:2px solid var(--red); max-width:500px; margin:50px auto; position:relative;">
            <span style="position:absolute; right:15px; top:10px; font-weight:bold; cursor:pointer; color:var(--gray)" onclick="game.closeModal('adminModal')">[лЌлљлџлалФлблг]</span>
            <div id="admin-content"></div>
        </div>
    </div>

    <div id="enchantModal" class="modal">
        <div class="modal-content" style="background:var(--card); padding:15px; border-radius:10px; border:2px solid var(--accent); max-width:500px; margin:30px auto; position:relative; max-height:80vh; overflow-y:auto;">
            <span style="position:absolute; right:15px; top:10px; font-weight:bold; cursor:pointer; color:var(--gray)" onclick="game.closeModal('enchantModal')">[лЌлљлџлалФлблг]</span>
            <h3 style="text-align:center;">­ЪЊќ лЌлљлДлљлалълњлљлЮлўлЋ</h3>
            <div id="enchant-content"></div>
        </div>
    </div>

    <div id="foragingTalentsModal" class="modal">
        <span style="float:right;font-weight:bold;cursor:pointer" onclick="game.closeModal('foragingTalentsModal')">[лЌлљлџлалФлблг]</span>
        <h3>­ЪЊю лблљлЏлљлЮлблФ лЏлЋлАлљ</h3>
        <div id="foraging-talents-content"></div>
    </div>

    <div id="eventsModal" class="modal">
        <div class="modal-content" style="background:var(--card); padding:20px; border-radius:10px; border:2px solid var(--dark-gray); max-width:500px; margin:50px auto; position:relative;">
            <span style="position:absolute; right:15px; top:10px; font-weight:bold; cursor:pointer; color:var(--gray)" onclick="game.closeModal('eventsModal')">[лЌлљлџлалФлблг]</span>
            <h3 style="text-align:center;">­ЪЊЁ лўлњлЋлЮлблФ</h3>
            <div id="events-content"></div>
        </div>
    </div>

    <div id="mayorModal" class="modal">
        <div class="modal-content" style="background:var(--card); padding:20px; border-radius:10px; border:2px solid var(--dark-gray); max-width:500px; margin:50px auto; position:relative;">
            <span style="position:absolute; right:15px; top:10px; font-weight:bold; cursor:pointer; color:var(--gray)" onclick="game.closeModal('mayorModal')">[лЌлљлџлалФлблг]</span>
            <div id="mayor-content"></div>
        </div>
    </div>

    <nav id="nav">
        <button class="nav-item active" onclick="game.switchTab('home',this)"><span>­ЪЈа</span>лћлълю</button>
        <button class="nav-item" onclick="game.switchTab('portal',this)"><span>­Ъїђ</span>лЪлълалблљлЏ</button>
        <button class="nav-item" onclick="game.switchTab('minions',this)"><span>­ЪЉи</span>люлўлЮлглълЮлФ</button>
        <button class="nav-item" onclick="game.switchTab('inventory',this)"><span>­Ъјњ</span>лўлЮлњлЋлЮлблљлалг</button>
    </nav>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="game.js"></script>
    <script src="news.js"></script>
    <script src="inventory.js"></script>
    <script src="top.js"></script>
    <script src="dungeon.js"></script>
    <script src="skills.js"></script>
    <script src="farming.js"></script>
    <script src="pets.js"></script>
    <script src="mining.js"></script>
    <script src="foraging.js"></script>
    <script src="fishing.js"></script>
    <script src="exchange.js"></script>
    <script src="events.js"></script>
    <script src="mayor.js"></script>
    <script src="admin.js"></script>
    <script src="slayer.js"></script>
    <script src="enchanting.js"></script>
    <script>
      const ADMIN_IDS = [1546583402];
      const user = Telegram.WebApp.initDataUnsafe?.user;
      const isAdmin = user && ADMIN_IDS.includes(user.id);
      const adminNode = document.querySelector('.portal-node[onclick="game.openAdminPanel()"]');
      if (adminNode) {
        if (!isAdmin) {
          adminNode.style.display = 'none';
        } else {
          adminNode.style.borderColor = 'var(--red)';
          adminNode.style.background = 'rgba(255, 0, 0, 0.08)';
        }
      }
      const originalOpenAdmin = game.openAdminPanel;
      game.openAdminPanel = function() {
        if (!isAdmin) { alert("лћлЙЛЂЛѓЛЃл┐ лил░л┐ЛђлхЛЅЛЉлй"); return; }
        originalOpenAdmin?.call(game);
      };
    </script>
</body>
</html>
